
<p id="notice"><%= notice %></p>
<img src"/assets/images/dormitorio.jpg">

<%= image_tag("dormitorio.jpg", :alt => "rss feed", class: "bg") %>

<div class="row">
<div class="col-sm-2"></div>
<div class="col-sm-8">
<h1 class="titulo page-header">
            <i class="fa fa-globe"></i>#Hotel-UNI  Listado de Habitaciones
            <small class="pull-right">Date: 2/10/2014</small>
          </h1>
</div>        
</div> 


    <div class="row">
    <div class="col-sm-2"></div>
    <div class="col-sm-8">
      <%= link_to new_room_path, remote: true, class: "btn btn-primary" do %>
      <span class="fa fa-fw fa-bed"></span>
       Nueva Habitacion
      <%end%>
    </div>
     <div class="col-sm-2"></div>
    </div>
<div class="row">

<div class="col-sm-2"></div>
<div class="col-sm-8 text-center">
  <table id="tabla" class="table table-striped table-bordered table-hover">
    <thead>
      <tr>  

        <th class="text-center">IDENTIFICADOR</th>
    
        <th class="text-center">TIPO DE HABITACION</th>
    
        <th class="text-center">ESTADO</th>
    
        <th class="text-center">CAPACIDAD</th>
    
       
    
        <th></th>
        <th></th>
        <th></th>
      </tr>
    </thead>

<tbody>
          <% @rooms.each do |room| %>
            <%= render "row", room: room %>
          <% end %>
        </tbody>
  </table>
</div>




<div class="col-md-2">
         <div class="box box-default collapsed-box">
            <div class="box-header with-border">
              <h3 class="box-title">Estadisticas</h3>

              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i>
                </button>
              </div>
              <!-- /.box-tools -->
            </div>
            <!-- /.box-header -->
            <div class="box-body" style="display: none;">
               <div id= "tabla-2">
                <%= render "row_type" %>
               </div> 
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->
        </div>



 </div> 
  <% title = "Nueva Habitacion"%>
  <div class="modal fade" id="test-modal">
  <div class="modal-dialog">
    <div class="modal-content">
         <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><%= title %></h4>
      </div>
 <%= nested_form_for @room, remote: true ,data: {toggle: "validator"} do |f| %>
 <div class="modal-body">
  <% if @room.errors.any? %>
 |
    <div class="alert alert-danger alert-dismissable" role="alert">
      <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
      <h4><%= pluralize(@room.errors.count, "error") %> prohibited this type_of_room from being saved:</h4>

      <ul>
      <% @room.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
    
    <div class="alert alert-danger" role="alert" style="display: none;"></div>
      <div class ="form-group row">
       <div class="col-sm-6">  
          <div class="form-group has-feedback">
            <%= f.label :type_of_room, class: "control-label" %>      
             <%= f.select :type_of_room_id ,TypeOfRoom.all.collect { |p| [p.tipo, p.id ] },{include_blank: false},class: "form-control",:required => true %>
             <span id="alerta span"class="glyphicon form-control-feedback" aria-hidden="true"></span>
             <div class="help-block with-errors">*requerido</div>
          </div>
        </div>
         <div class="col-sm-6">  
          <div class="form-group has-feedback">
            <%= f.label "Identificador", class: "control-label" %>
            <%= f.text_field  :identificador,type: "text" ,minlength: 3, class: "form-control ", placeholder: "Identificador de Habitacion" ,:required => true %>
            <span id="alerta span"class="glyphicon form-control-feedback" aria-hidden="true"></span>
             <div class="help-block with-errors">*requerido</div>
          </div>
        </div>

      </div>



      <div class ="form-group row">
       <div class="col-sm-6">  

          <div class="form-group has-feedback">
             <%= f.label :state, class: "control-label" %>
            <%= f.select :state_id ,State.all.collect { |p| [p.descripcion, p.id ] },{include_blank: false},class: "form-control",:required =>true  %>                
             <div class="help-block with-errors">*requerido</div>
               <span id="alerta span"class="glyphicon form-control-feedback" aria-hidden="true"></span>
          
          </div>
        </div>  
         <div class="col-sm-6">  
          <div  class="form-group has-feedback">
             <%= f.label "Capacidad", class: "control-label" %>
            <%= f.text_field  :capacidad,type: "number" ,min: 1,max: 10,  class: "form-control", placeholder: "Capacidad Habitacion" ,:required => true %>
            <span id="alerta span"class="glyphicon form-control-feedback" aria-hidden="true"></span>
             <div class="help-block with-errors">*requerido</div>
          </div>
        </div>
      </div> 

          <div class="form-group">
          <%= f.label "confort",class: "control-label" %> 
          
         </div>
          

          <%= f.fields_for :room_comforts do |room| %>
           <div class="form-group row" >
              <div class="col-sm-10">  
              <%= room.select :comfort_id, Comfort.all.collect { |p| [ p.descripcion, p.id ] },{include_blank: false},class: "form-control" %>
              </div>
              <div>
              <%= room.link_to_remove "" ,class: "col-sm-1 glyphicon glyphicon-trash"%>
            </div>
           </div>
       
          <% end %>
     
         <div class="text-center">
         <%= f.link_to_add "", :room_comforts ,class: "control-label glyphicon glyphicon-plus"%> 
         </div>
    
  </div>

      <div class="modal-footer ">
         <div class="col-sm-10">
            <%= f.submit class: "btn btn-primary pull-left" %>
         </div>
      </div>
        <div></div>
      <% end %>
    </div>
  </div>
</div>

